# vmware-vm-bootstrap library defaults
# All hardcoded values are centralized here.
# Override per-VM via VMConfig struct fields.

vcenter:
  port: 443

vm:
  firmware: bios
  guest_os: ubuntu64Guest

network:
  interface: ens192  # Default NIC name on VMware (govmomi assigns this)

talos:
  default_version: v1.12.4
  default_cluster_name: dev
  default_timeout_minutes: 45
  plan_network:
    cidr: 192.168.110.0/24
    start_ip: 192.168.110.20
    gateway: 192.168.110.1
    dns: 192.168.110.1
  plan_node_types:
    controlplane:
      cpus: 4
      memory_gb: 8
      disk_size_gb: 60
    worker:
      cpus: 8
      memory_gb: 16
      disk_size_gb: 100
  plan_layout:
    controlplane_count: 3
    worker_count: 2

cloudinit:
  locale: en_US.UTF-8
  timezone: UTC
  keyboard_layout: us
  swap_size_gb: 0
  packages:
    - open-vm-tools
  user_groups: sudo,adm,dialout,cdrom,audio,video,plugdev,users
  user_shell: /bin/bash

timeouts:
  installation_minutes: 30       # Max wait for Ubuntu autoinstall to complete
  polling_seconds: 10            # Interval between installation status checks
  hostname_checks: 3             # Consecutive checks with correct hostname = install done
  service_startup_seconds: 30    # Extra wait after hostname confirmed (SSH/services start)
  ssh_retries: 3                 # SSH availability verification attempts
  ssh_connect_seconds: 5         # Timeout per SSH connection attempt
  ssh_retry_delay_seconds: 2     # Delay between SSH retry attempts
  hardware_init_seconds: 5       # Wait for VM hardware to initialize after power-on
  download_minutes: 30           # Max time to download Ubuntu ISO
  upload_progress_seconds: 2     # Progress print interval during datastore upload
  extract_progress_seconds: 3    # Progress print interval during ISO extraction

iso:
  nocloud_volume_id: CIDATA             # Volume label for NoCloud datasource (must be uppercase)
  grub_timeout_seconds: 5               # GRUB boot menu timeout (reduced from Ubuntu default 30s)
  cache_dir: cache                      # Local cache directory for downloaded/modified ISOs
  ubuntu_modified_suffix: -autoinstall  # Suffix added to modified Ubuntu ISO filename
  extract_dir_name: ubuntu-extracted    # Temp directory name for ISO extraction
  ubuntu_volume_id: Ubuntu-AI           # Volume ID for repacked Ubuntu ISO

output:
  enable: true
  bootstrap_result_path: tmp/bootstrap-result.{vm}.yaml  # Write a machine-readable output for downstream automation (IP, SSH user, port, fingerprint)
